(function(){"use strict";var e={2928:function(e,t,r){var i=r(9242),s=r(3396),n=r(7139);const a={class:"page"},u={class:"page"},c={class:"currencies"},o=(0,s.uE)('<div class="currency currency_title"><div class="currency_charcode"> Букв. код </div><div class="currency_name"> Название </div><div class="currency_value"> Стоимость </div><div class="currency_gap"> Изменение </div></div>',1),d={class:"currency currency_marker"},l={class:"currency_charcode"},v={class:"currency_name"},h={class:"currency_value"},g={key:0,class:"currency_gap green"},y=(0,s._)("span",{class:"rotate-up"},null,-1),f={key:1,class:"currency_gap red"},p=(0,s._)("span",{class:"rotate-down"},null,-1),w={class:"currency_description"},D={class:"currency"},b=(0,s._)("div",null,null,-1),_={key:0,class:"currency_gap green"},$=(0,s._)("span",{class:"rotate-up"},null,-1),P={key:1,class:"currency_gap red"},m=(0,s._)("span",{class:"rotate-down"},null,-1);function x(e,t,r,x,k,O){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)((0,s._)("div",a,"Идет загрузка...",512),[[i.F8,k.isPageLoading]]),(0,s.wy)((0,s._)("div",u,[(0,s._)("div",c,[o,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.currencies,(e=>((0,s.wg)(),(0,s.iD)("details",{key:e.id},[(0,s._)("summary",d,[(0,s._)("div",l,(0,n.zw)(e.CharCode),1),(0,s._)("div",v,(0,n.zw)(e.Name),1),(0,s._)("div",h,(0,n.zw)(`${e.Value.toFixed(2)} ₽`),1),e.Value>e.Previous?((0,s.wg)(),(0,s.iD)("div",g,[y,(0,s.Uk)((0,n.zw)(`${(e.Value/e.Previous*100-100).toFixed(3)}%`),1)])):((0,s.wg)(),(0,s.iD)("div",f,[p,(0,s.Uk)((0,n.zw)(`${(100-e.Value/e.Previous*100).toFixed(3)}%`),1)]))]),(0,s._)("div",w,[(0,s._)("div",D,[b,(0,s._)("div",null,(0,n.zw)(`${this.dailyDate.substring(0,4)} ${this.dailyDate.substring(5,7)} ${this.dailyDate.substring(8,10)} ${this.dailyDate.substring(11,16)} MSK`),1),(0,s._)("div",null,(0,n.zw)(`${e.Value.toFixed(2)} ₽`),1),(0,s._)("div",null,[e.Value>e.Previous?((0,s.wg)(),(0,s.iD)("div",_,[$,(0,s.Uk)((0,n.zw)(`${(e.Value/e.Previous*100-100).toFixed(3)}%`),1)])):((0,s.wg)(),(0,s.iD)("div",P,[m,(0,s.Uk)((0,n.zw)(`${(100-e.Value/e.Previous*100).toFixed(3)}%`),1)]))])])])])))),128))])],512),[[i.F8,!k.isPageLoading]])],64)}var k=r(6265),O=r.n(k),V={data(){return{currencies:[],currenciesPrevious:[],dailyDate:"",currentDate:"",previousDate:"",dayOfMonth:"",isPageLoading:!1,count:1}},methods:{async fetchCurrencies(){try{this.isPageLoading=!0;const e=await O().get("https://www.cbr-xml-daily.ru/daily_json.js");this.currentDate=this.dailyDate=e.data.Date,this.previousDate=e.data.PreviousDate,this.currencies=e.data.Valute}catch(e){console.log("ошибка 1")}finally{await this.fetchPreviousCurrencies()}},async fetchPreviousCurrencies(){try{this.currenciesPrevious=[];let e=await O().get(`https://www.cbr-xml-daily.ru/archive/${this.getPreviousDay(this.currentDate.substring(0,4),this.currentDate.substring(5,7),this.currentDate.substring(8,10))}/daily_json.js`);this.previousDate=e.data.PreviousDate,this.currentDate=e.data.Date,this.currenciesPrevious=e.data.Valute,this.addNewRow(this.currenciesPrevious),this.count+=1}catch(e){console.log("ошибка 2"),this.dayOfMonth=this.previousDate.substring(8,10)<10?`0${Number(this.previousDate.substring(8,10))+1}`:`${Number(this.previousDate.substring(8,10))+1}`,this.currentDate=this.previousDate.substring(0,8)+this.dayOfMonth+this.previousDate.substring(10)}finally{this.count<10&&await this.fetchPreviousCurrencies(),this.count>=10&&(this.isPageLoading=!1)}},addNewRow(e){let t=document.getElementsByClassName("currency_charcode");for(let r in e)for(let i=0;i<t.length;i++)if(r===t[i].innerHTML){let s=document.createElement("div");s.classList.add("currency"),e[r].Value>e[r].Previous?s.innerHTML=`<div></div><div>${this.currentDate.substring(0,4)} ${this.currentDate.substring(5,7)} ${this.currentDate.substring(8,10)} ${this.currentDate.substring(11,16)}  MSK</div><div>${e[r].Value.toFixed(2)} ₽</div><div class="currency_gap green"><span class="rotate-up"></span>${(e[r].Value/e[r].Previous*100-100).toFixed(3)}%</div>`:s.innerHTML=`<div></div><div>${this.currentDate.substring(0,4)} ${this.currentDate.substring(5,7)} ${this.currentDate.substring(8,10)} ${this.currentDate.substring(11,16)} MSK</div><div>${e[r].Value.toFixed(2)} ₽</div><div class="currency_gap red"><span class="rotate-down"></span>${(100-e[r].Value/e[r].Previous*100).toFixed(3)}%</div>`,t[i].parentNode.parentNode.childNodes[1].appendChild(s)}},getPreviousDay(e,t,r){let i=new Date(e,t-1,r);return i=i.toISOString(),`${i.substring(0,4)}/${i.substring(5,7)}/${i.substring(8,10)}`}},mounted(){this.fetchCurrencies()}},F=r(89);const C=(0,F.Z)(V,[["render",x]]);var j=C;(0,i.ri)(j).mount("#app")}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,i,s,n){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var u=!0,c=0;c<i.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](i[c])}))?i.splice(c--,1):(u=!1,n<a&&(a=n));if(u){e.splice(d--,1);var o=s();void 0!==o&&(t=o)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,a=i[0],u=i[1],c=i[2],o=0;if(a.some((function(t){return 0!==e[t]}))){for(s in u)r.o(u,s)&&(r.m[s]=u[s]);if(c)var d=c(r)}for(t&&t(i);o<a.length;o++)n=a[o],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},i=self["webpackChunkcbr"]=self["webpackChunkcbr"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(2928)}));i=r.O(i)})();
//# sourceMappingURL=app.727cc063.js.map