(function(){"use strict";var e={6636:function(e,r,t){var i=t(9242),s=t(3396),n=t(7139);const a={class:"page"},u={class:"page"},c={class:"currencies"},o=(0,s.uE)('<div class="currency currency_title"><div class="currency_charcode"> Букв. код </div><div class="currency_name"> Название </div><div class="currency_value"> Стоимость </div><div class="currency_gap"> Изменение </div></div>',1),l={class:"currency currency_marker"},d={class:"currency_charcode"},v={class:"currency_name"},h={class:"currency_value"},g={key:0,class:"currency_gap green"},y=(0,s._)("span",{class:"rotate-up"},null,-1),f={key:1,class:"currency_gap red"},p=(0,s._)("span",{class:"rotate-down"},null,-1),w={class:"currency_description"},b={class:"currency"},D=(0,s._)("div",null,null,-1),_={key:0,class:"currency_gap green"},$=(0,s._)("span",{class:"rotate-up"},null,-1),P={key:1,class:"currency_gap red"},m=(0,s._)("span",{class:"rotate-down"},null,-1);function x(e,r,t,x,k,O){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)((0,s._)("div",a,"Идет загрузка...",512),[[i.F8,k.isPageLoading]]),(0,s.wy)((0,s._)("div",u,[(0,s._)("div",c,[o,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.currencies,(e=>((0,s.wg)(),(0,s.iD)("details",{key:e.id},[(0,s._)("summary",l,[(0,s._)("div",d,(0,n.zw)(e.CharCode),1),(0,s._)("div",v,(0,n.zw)(e.Name),1),(0,s._)("div",h,(0,n.zw)(`${e.Value.toFixed(2)} ₽`),1),e.Value>e.Previous?((0,s.wg)(),(0,s.iD)("div",g,[y,(0,s.Uk)((0,n.zw)(`${(e.Value/e.Previous*100-100).toFixed(3)}%`),1)])):((0,s.wg)(),(0,s.iD)("div",f,[p,(0,s.Uk)((0,n.zw)(`${(100-e.Value/e.Previous*100).toFixed(3)}%`),1)]))]),(0,s._)("div",w,[(0,s._)("div",b,[D,(0,s._)("div",null,(0,n.zw)(`${this.dailyDate.substring(0,4)} ${this.dailyDate.substring(5,7)} ${this.dailyDate.substring(8,10)} ${this.dailyDate.substring(11,16)} MSK`),1),(0,s._)("div",null,(0,n.zw)(`${e.Value.toFixed(2)} ₽`),1),(0,s._)("div",null,[e.Value>e.Previous?((0,s.wg)(),(0,s.iD)("div",_,[$,(0,s.Uk)((0,n.zw)(`${(e.Value/e.Previous*100-100).toFixed(3)}%`),1)])):((0,s.wg)(),(0,s.iD)("div",P,[m,(0,s.Uk)((0,n.zw)(`${(100-e.Value/e.Previous*100).toFixed(3)}%`),1)]))])])])])))),128))])],512),[[i.F8,!k.isPageLoading]])],64)}var k=t(6265),O=t.n(k),V={data(){return{currencies:[],currenciesPrevious:[],dailyDate:"",currentDate:"",previousDate:"",dayOfMonth:"",isPageLoading:!1,count:0}},methods:{async fetchCurrencies(){try{this.isPageLoading=!0;const e=await O().get("https://www.cbr-xml-daily.ru/daily_json.js");this.currentDate=this.dailyDate=e.data.Date,this.currencies=e.data.Valute}catch(e){console.log("ошибка 1")}finally{await this.fetchPreviousCurrencies()}},async fetchPreviousCurrencies(){try{this.currenciesPrevious=[];let e=await O().get(`https://www.cbr-xml-daily.ru/archive/${this.getPreviousDay(this.currentDate.substring(0,4),this.currentDate.substring(5,7),this.currentDate.substring(8,10))}/daily_json.js`);this.previousDate=e.data.PreviousDate,this.currentDate=e.data.Date,this.currenciesPrevious=e.data.Valute,this.addNewRow(this.currenciesPrevious)}catch(e){console.log("ошибка 2"),this.dayOfMonth=this.previousDate.substring(8,10)<10?`0${Number(this.previousDate.substring(8,10))+1}`:`${Number(this.previousDate.substring(8,10))+1}`,this.currentDate=this.previousDate.substring(0,8)+this.dayOfMonth+this.previousDate.substring(10)}finally{this.count+=1,this.count<=10&&await this.fetchPreviousCurrencies(),this.count>10&&(this.isPageLoading=!1)}},addNewRow(e){let r=document.getElementsByClassName("currency_charcode");for(let t in e)for(let i=0;i<r.length;i++)if(t===r[i].innerHTML){let s=document.createElement("div");s.classList.add("currency"),e[t].Value>e[t].Previous?s.innerHTML=`<div></div><div>${this.currentDate.substring(0,4)} ${this.currentDate.substring(5,7)} ${this.currentDate.substring(8,10)} ${this.currentDate.substring(11,16)}  MSK</div><div>${e[t].Value.toFixed(2)} ₽</div><div class="currency_gap green"><span class="rotate-up"></span>${(e[t].Value/e[t].Previous*100-100).toFixed(3)}%</div>`:s.innerHTML=`<div></div><div>${this.currentDate.substring(0,4)} ${this.currentDate.substring(5,7)} ${this.currentDate.substring(8,10)} ${this.currentDate.substring(11,16)} MSK</div><div>${e[t].Value.toFixed(2)} ₽</div><div class="currency_gap red"><span class="rotate-down"></span>${(100-e[t].Value/e[t].Previous*100).toFixed(3)}%</div>`,r[i].parentNode.parentNode.childNodes[1].appendChild(s)}},getPreviousDay(e,r,t){let i=new Date(e,r-1,t);return i=i.toISOString(),`${i.substring(0,4)}/${i.substring(5,7)}/${i.substring(8,10)}`}},mounted(){this.fetchCurrencies()}},F=t(89);const C=(0,F.Z)(V,[["render",x]]);var j=C;(0,i.ri)(j).mount("#app")}},r={};function t(i){var s=r[i];if(void 0!==s)return s.exports;var n=r[i]={exports:{}};return e[i](n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(r,i,s,n){if(!i){var a=1/0;for(l=0;l<e.length;l++){i=e[l][0],s=e[l][1],n=e[l][2];for(var u=!0,c=0;c<i.length;c++)(!1&n||a>=n)&&Object.keys(t.O).every((function(e){return t.O[e](i[c])}))?i.splice(c--,1):(u=!1,n<a&&(a=n));if(u){e.splice(l--,1);var o=s();void 0!==o&&(r=o)}}return r}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[i,s,n]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,i){var s,n,a=i[0],u=i[1],c=i[2],o=0;if(a.some((function(r){return 0!==e[r]}))){for(s in u)t.o(u,s)&&(t.m[s]=u[s]);if(c)var l=c(t)}for(r&&r(i);o<a.length;o++)n=a[o],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(l)},i=self["webpackChunkcbr"]=self["webpackChunkcbr"]||[];i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(6636)}));i=t.O(i)})();
//# sourceMappingURL=app.83f3450e.js.map